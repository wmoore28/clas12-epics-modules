10.7.2 iocLogClient

This runs on each ioc. It is started calling:

    iocLogInit();

The global variable iocLogDisable can be used to enable/disable the messages
from being sent to the server. Setting this variable to (0,1) (enables,disables)
the messages generation. If iocLogDisable is set to 1 before calling iocLogInit
then iocLogClient will not even initialize itself. iocLogDisable can also be
changed to turn logging on or off.

iocLogClient calls errlogAddListener and sends each message to the iocLogServer.

The following description was supplied by Jeff Hill:

It is possible to configure EPICS so that a log of IOC error messages is stored
in a circular ASCII file on a PC or UNIX workstation. Each entry in the log
contains the IOC's DNS name, the date and time when the message was received by
the log server, and the text of the message generated on the IOC.

All messages generated by the EPICS functions epicsPrintf() and errMessage() are
placed in the log. Messages generated by the vxWorks function logMsg() are also
placed in the log (logMsg() can be safely called from interrupt level). Messages
generated by printf() do not end up in the log and are instead used primarily by
diagnostic functions called from the vxWorks shell.

To start a log server on a UNIX or PC workstation you must first set the
following environment variables and then run the executable "iocLogServer" on
your PC or UNIX workstation.

EPICS_IOC_LOG_FILE_NAME

    The name and path to the log file.

EPICS_IOC_LOG_FILE_LIMIT

    The maximum size in characters for the log file (after which it becomes a
    circular file and writes new messages over old messages at the beginning of
    the file). If the value is zero then there is no limit on the size of the
    log file.

EPICS_IOC_LOG_FILE_COMMAND

    A shell command string used to obtain the log file path name during
    initialization and in response to SIGHUP. The new path name will replace any
    path name supplied in EPICS_IOC_LOG_FILE_NAME.

    Thus, if EPICS_IOC_LOG_FILE_NAME is "a/b/c.log" and
    EPICS_IOC_LOG_FILE_COMMAND returns "A/B" or "A/B/" the log server will be
    stored at "A/B/c.log"

    If EPICS_IOC_LOG_FILE_COMMAND is empty then this behavior is disabled. This
    feature was donated to the collaboration by KECK, and it is used by them for
    switching to a new directory at a fixed time each day. This variable is
    currently used only by the UNIX version of the log server.

EPICS_IOC_LOG_PORT

    The TCP/IP port used by the log server.

To configure an IOC so that its messages are placed in the log you must set the
environment variable EPICS_IOC_LOG_INET to the IP address of the host that is
running the log server and EPICS_IOC_LOG_PORT to the TCP/IP port used by the log
server.

Defaults for all of the above parameters are specified in the files
$(EPICS_BASE)/config/CONFIG_SITE_ENV and $(EPICS_BASE)/config/CONFIG_ENV.

In base/src/util there is a solaris script for starting the log server. This can
be adapted for use on other host architectures.

19.15 logClient
Remove:
The iocLog client. This does not really belong in libCom.
Add:
